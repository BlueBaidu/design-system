import { useState, useEffect } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';

import { Typography, DismissibleLayer, DismissibleLayerBranch } from '@strapi/design-system';

<Meta title="Design System/Technical Components/DismissibleLayer" component={DismissibleLayer} />

# DismissibleLayer

`DismissibleLayer` is a internal utility component re-exported from the `@radix-ui/dismissable-layer` package. It's typically
used within a `Modal` or a `Popover` & in conjunction with `FocusTrap`.

[View source](https://github.com/strapi/design-system/tree/main/packages/strapi-design-system/src/DismissibleLayer)

## Usage

```js
import { DismissibleLayer } from '@strapi/design-system';
```

### Basic Usage

Typically you'll want to provide a `onEscapeKeyDown` and `onPointerDownOutside` handler to dismiss the layer.

<Canvas>
  <Story name="base">
    {() => {
      const [isVisible, setIsVisible] = useState(true);
      useEffect(() => {
        let timeout = null;
        if (!isVisible) {
          timeout = setTimeout(() => setIsVisible(true), 1000);
        }
        return () => clearTimeout(timeout);
      }, [isVisible]);
      return isVisible ? (
        <DismissibleLayer onEscapeKeyDown={() => setIsVisible(false)} onPointerDownOutside={() => setIsVisible(false)}>
          <Typography style={{ backgroundColor: '#ccc', padding: '20px', display: 'block' }}>
            press escape or click outside to dismiss
          </Typography>
        </DismissibleLayer>
      ) : null;
    }}
  </Story>
</Canvas>

## Props

### DismissibleLayer

<ArgsTable of={DismissibleLayer} />
